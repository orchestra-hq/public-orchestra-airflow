name: Python Package using Conda

on: [push]

jobs:
  data-pipeline:
    runs-on: ubuntu-latest
    strategy:
      max-parallel: 5

    steps:
    - name: Ingest data
      run: |
        echo "ğŸ This Ingesting data from multiple sources"
    - name: Test sources
      run: |
        echo "âœ¨âœ¨âœ¨âœ¨ Test sources"
    - name: dbt (Staging)
      run: |
        echo ""ğŸ±â€ğŸ We are now running dbt in a staging environment"
    - name: Test aggregate tables (Staging)
      run: |
        echo "âœ¨âœ¨âœ¨âœ¨ Testing the aggregate tables"
    - name: dbt (Production)
      run: |
        echo "ğŸ±â€ğŸ Running dbt in production again"
    - name: Test aggregate tables (Production)
      run: |
        echo " âœ¨âœ¨âœ¨âœ¨Testing aggregate tables in production" 
    - name: Provision roles and access (Production) 
      run: |
        echo "âœŒ Ensuring access to production schemas, databases and tables is restricted"
